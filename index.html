<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>切れ者カウンター</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1f1f1f, #3a3a3a);
      color: #eee;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
    }
    h1 {
      font-size: 28px;
      margin-bottom: 20px;
      color: #f0f0f0;
      text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    }
    .selector {
      margin-bottom: 20px;
    }
    select {
      padding: 6px 12px;
      font-size: 16px;
      border-radius: 6px;
      border: none;
      background: #444;
      color: #eee;
    }
    .card {
      background: rgba(255, 255, 255, 0.08);
      padding: 20px;
      border-radius: 16px;
      text-align: center;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
      width: 260px;
      transition: transform 0.2s ease-in-out;
      position: relative;
    }
    .card h2 {
      margin: 0 0 12px;
      font-size: 20px;
    }
    .count {
      font-size: 18px;
      margin: 10px 0;
    }
    .btn-row {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 12px;
    }
    button {
      border: none;
      color: white;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      transition: transform 0.1s, box-shadow 0.1s;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }
    button:active {
      transform: scale(0.95);
    }
    /* ボタンカラー */
    .btn-inc { background: linear-gradient(45deg, #4facfe, #00f2fe); }
    .btn-dec { background: linear-gradient(45deg, #43e97b, #38f9d7); }
    .btn-reset { background: linear-gradient(45deg, #f7971e, #ffd200); color: #222; }
    .btn-explode { background: linear-gradient(45deg, #ff512f, #dd2476); }

    /* アニメーション */
    .shake {
      animation: shake 0.3s infinite;
    }
    @keyframes shake {
      0% { transform: translate(2px, 1px) rotate(0deg); }
      20% { transform: translate(-1px, -2px) rotate(-1deg); }
      40% { transform: translate(-3px, 0px) rotate(1deg); }
      60% { transform: translate(3px, 2px) rotate(0deg); }
      80% { transform: translate(1px, -1px) rotate(1deg); }
      100% { transform: translate(-1px, 2px) rotate(-1deg); }
    }
    .fly-away {
      animation: fly 0.8s forwards;
    }
    @keyframes fly {
      0% { transform: translate(0, 0) scale(1); opacity: 1; }
      100% { transform: var(--fly-x, 300px) var(--fly-y, -300px) scale(0.1); opacity: 0; }
    }
  </style>
</head>
<body>
  <h1>切れ者カウンター</h1>

  <div class="selector">
    <label for="slotSelect">スロット選択: </label>
    <select id="slotSelect" onchange="selectSlot(this.value)">
      <option value="1">データ1</option>
      <option value="2">データ2</option>
      <option value="3">データ3</option>
    </select>
  </div>

  <div class="card" id="card">
    <h2 id="title">データ1</h2>
    <div class="count">育成回数: <span id="grow">0</span></div>
    <div class="btn-row">
      <button class="btn-inc" onclick="changeCount('grow', 1)">＋</button>
      <button class="btn-dec" onclick="changeCount('grow', -1)">－</button>
    </div>
    <div class="count">切れ者: <span id="kire">0</span></div>
    <div class="btn-row">
      <button class="btn-inc" onclick="changeCount('kire', 1)">＋</button>
      <button class="btn-dec" onclick="changeCount('kire', -1)">－</button>
    </div>
    <div class="btn-row">
      <button class="btn-reset" onclick="resetCounts()">リセット</button>
      <button class="btn-explode" onclick="explode()">爆破</button>
    </div>
  </div>

  <script>
    let currentSlot = 1;
    let data = JSON.parse(localStorage.getItem('umamusumeData')) || {
      1: { grow: 0, kire: 0, cracks: 0 },
      2: { grow: 0, kire: 0, cracks: 0 },
      3: { grow: 0, kire: 0, cracks: 0 }
    };

    function saveData() {
      localStorage.setItem('umamusumeData', JSON.stringify(data));
    }

    function render() {
      const slot = data[currentSlot];
      document.getElementById("title").innerText = `データ${currentSlot}`;
      document.getElementById("grow").innerText = slot.grow;
      document.getElementById("kire").innerText = slot.kire;
      document.getElementById("slotSelect").value = currentSlot;
    }

    function selectSlot(slot) {
      currentSlot = Number(slot);
      document.getElementById("card").classList.remove("shake", "fly-away");
      render();
    }

    function changeCount(type, delta) {
      data[currentSlot][type] = Math.max(0, data[currentSlot][type] + delta); // マイナス禁止
      data[currentSlot].cracks = 0; // 爆破リセット
      document.getElementById("card").classList.remove("shake", "fly-away");
      render();
      saveData();
    }

    function resetCounts() {
      data[currentSlot] = { grow: 0, kire: 0, cracks: 0 };
      document.getElementById("card").classList.remove("shake", "fly-away");
      render();
      saveData();
    }

    function explode() {
      const card = document.getElementById("card");
      data[currentSlot].cracks++;
      card.classList.add("shake");

      if (data[currentSlot].cracks >= 5) {
        const randomX = (Math.random() * 800 - 400) + "px";
        const randomY = (Math.random() * -600 - 100) + "px";
        card.style.setProperty("--fly-x", randomX);
        card.style.setProperty("--fly-y", randomY);

        card.classList.remove("shake");
        card.classList.add("fly-away");

        setTimeout(() => {
          resetCounts();
          card.classList.remove("fly-away");
          card.style.setProperty("--fly-x", "300px");
          card.style.setProperty("--fly-y", "-300px");
        }, 800);
      }
      saveData();
    }

    render();
  </script>
</body>
</html>
