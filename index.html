<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>切れ者カウンター</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #141E30, #243B55);
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }
    .container {
      display: flex;
      gap: 20px;
    }
    .card {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 16px;
      text-align: center;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
      width: 200px;
      transition: transform 0.2s ease-in-out;
      position: relative;
    }
    .card h2 {
      margin: 0 0 10px;
      font-size: 20px;
    }
    .count {
      font-size: 18px;
      margin: 8px 0;
    }
    button {
      background: #00c6ff;
      background: linear-gradient(45deg, #0072ff, #00c6ff);
      border: none;
      color: white;
      padding: 8px 12px;
      margin: 4px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      transition: transform 0.1s, box-shadow 0.1s;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
    }
    button:active {
      transform: scale(0.95);
    }
    .shake {
      animation: shake 0.3s infinite;
    }
    @keyframes shake {
      0% { transform: translate(2px, 1px) rotate(0deg); }
      20% { transform: translate(-1px, -2px) rotate(-1deg); }
      40% { transform: translate(-3px, 0px) rotate(1deg); }
      60% { transform: translate(3px, 2px) rotate(0deg); }
      80% { transform: translate(1px, -1px) rotate(1deg); }
      100% { transform: translate(-1px, 2px) rotate(-1deg); }
    }
    .fly-away {
      animation: fly 0.8s forwards;
    }
    @keyframes fly {
      0% { transform: translate(0, 0) scale(1); opacity: 1; }
      100% { transform: translate(500px, -500px) scale(0.1); opacity: 0; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card" id="slot1">
      <h2>データ1</h2>
      <div class="count">育成回数: <span id="grow1">0</span></div>
      <div class="count">切れ者: <span id="kire1">0</span></div>
      <button onclick="increment('grow', 1)">育成回数</button>
      <button onclick="increment('kire', 1)">切れ者</button>
      <button onclick="resetCounts(1)">リセット</button>
      <button onclick="explode(1)">爆破</button>
    </div>
    <div class="card" id="slot2">
      <h2>データ2</h2>
      <div class="count">育成回数: <span id="grow2">0</span></div>
      <div class="count">切れ者: <span id="kire2">0</span></div>
      <button onclick="increment('grow', 2)">育成回数</button>
      <button onclick="increment('kire', 2)">切れ者</button>
      <button onclick="resetCounts(2)">リセット</button>
      <button onclick="explode(2)">爆破</button>
    </div>
    <div class="card" id="slot3">
      <h2>データ3</h2>
      <div class="count">育成回数: <span id="grow3">0</span></div>
      <div class="count">切れ者: <span id="kire3">0</span></div>
      <button onclick="increment('grow', 3)">育成回数</button>
      <button onclick="increment('kire', 3)">切れ者</button>
      <button onclick="resetCounts(3)">リセット</button>
      <button onclick="explode(3)">爆破</button>
    </div>
  </div>

  <script>
    let data = JSON.parse(localStorage.getItem('umamusumeData')) || {
      1: { grow: 0, kire: 0, cracks: 0 },
      2: { grow: 0, kire: 0, cracks: 0 },
      3: { grow: 0, kire: 0, cracks: 0 }
    };

    function saveData() {
      localStorage.setItem('umamusumeData', JSON.stringify(data));
    }

    function render() {
      for (let i = 1; i <= 3; i++) {
        document.getElementById(`grow${i}`).innerText = data[i].grow;
        document.getElementById(`kire${i}`).innerText = data[i].kire;
      }
    }

    function increment(type, slot) {
      data[slot][type]++;
      data[slot].cracks = 0; // 爆破カウントリセット
      document.getElementById(`slot${slot}`).classList.remove('shake', 'fly-away');
      render();
      saveData();
    }

    function resetCounts(slot) {
      data[slot] = { grow: 0, kire: 0, cracks: 0 };
      document.getElementById(`slot${slot}`).classList.remove('shake', 'fly-away');
      render();
      saveData();
    }

    function explode(slot) {
      const card = document.getElementById(`slot${slot}`);
      data[slot].cracks++;
      card.classList.add('shake');

      if (data[slot].cracks >= 5) {
        card.classList.remove('shake');
        card.classList.add('fly-away');
        setTimeout(() => {
          resetCounts(slot);
          card.classList.remove('fly-away');
        }, 800);
      }
      saveData();
    }

    render();
  </script>
</body>
</html>
